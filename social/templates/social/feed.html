<!-- social/templates/social/feed.html -->
{% extends 'base.html' %}

{% block title %}Fil d'actualité - Mon Réseau Social{% endblock %}

{% block content %}
  <h2>Fil d'actualité</h2>
  {% if posts %}
    {% for post in posts %}
      <div class="post">
        <h3><a href="{% url 'post_detail' pk=post.pk %}">{{ post.title }}</a></h3>
        <p>Par {{ post.author.username }} dans <a href="{% url 'community_detail' pk=post.community.pk %}">{{ post.community.name }}</a></p>
        {% if post.image %}
          <img src="{{ post.image.url }}" alt="Image du post">
        {% endif %}
        <p>{{ post.content|truncatewords:30 }}</p>
        <p>Score : {{ post.score }}</p>
        <p>
          <a href="{% url 'vote' post_id=post.pk vote_type=1 %}">Upvote</a> |
          <a href="{% url 'vote' post_id=post.pk vote_type=-1 %}">Downvote</a>
        </p>
      </div>
    {% endfor %}
  {% else %}
    <p>Aucun post à afficher. Rejoignez des communautés pour voir les posts correspondants.</p>
  {% endif %}
  <a href="{% url 'create_post' %}">Créer un nouveau post</a>
{% endblock %}
